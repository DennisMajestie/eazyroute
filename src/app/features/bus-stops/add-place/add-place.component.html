<div class="add-place-root animate-fade-in">
    <!-- Dynamic Mesh Gradient Background -->
    <div class="mesh-gradient"></div>

    <!-- Header -->
    <div class="premium-header">
        <button class="glass-back-btn" (click)="goBack()">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div class="header-title">
            <h1>Submit Missing Place</h1>
            <p>Help us improve your map</p>
        </div>
    </div>

    <!-- Main Scrollable Area -->
    <div class="scroll-container">
        <div class="content-wrapper">

            <!-- Map Visualization -->
            <div class="map-container-wrapper glass-glow">
                <div class="map-inner">
                    <app-map [center]="center" [zoom]="17" [markers]="markers"></app-map>
                    <div class="map-overlay-tip">
                        <i class="fas fa-mouse-pointer me-2"></i> Drag pin to adjust
                    </div>
                    <button class="glass-locate-btn" (click)="detectLocation()" [disabled]="isDetecting">
                        <i class="fas" [class.fa-spinner]="isDetecting" [class.fa-spin]="isDetecting"
                            [class.fa-location-crosshairs]="!isDetecting"></i>
                    </button>
                </div>
            </div>

            <!-- Submission Glass Card -->
            <div class="glass-form-card animate-slide-up">
                <div class="card-glow"></div>

                <form (ngSubmit)="submitPlace()">
                    <!-- Place Name Input -->
                    <div class="input-group">
                        <label>Place Name</label>
                        <div class="glass-input-wrapper">
                            <input type="text" [(ngModel)]="place.name" name="name"
                                placeholder="e.g. Dogongada Village Gate" required>
                        </div>
                    </div>

                    <!-- Custom Type Picker (Icon Grid) -->
                    <div class="type-picker-group">
                        <label>Type of Place</label>
                        <div class="type-grid">
                            <div class="type-item" [class.active]="place.type === 'bus_stop'"
                                (click)="place.type = 'bus_stop'">
                                <div class="type-icon-wrapper">
                                    <i class="fas fa-bus"></i>
                                </div>
                                <span>Bus Stop</span>
                            </div>
                            <div class="type-item" [class.active]="place.type === 'landmark'"
                                (click)="place.type = 'landmark'">
                                <div class="type-icon-wrapper">
                                    <i class="fas fa-university"></i>
                                </div>
                                <span>Landmark</span>
                            </div>
                            <div class="type-item" [class.active]="place.type === 'junction'"
                                (click)="place.type = 'junction'">
                                <div class="type-icon-wrapper">
                                    <i class="fas fa-road"></i>
                                </div>
                                <span>Junction</span>
                            </div>
                            <div class="type-item" [class.active]="place.type === 'village_entry'"
                                (click)="place.type = 'village_entry'">
                                <div class="type-icon-wrapper">
                                    <i class="fas fa-home"></i>
                                </div>
                                <span>Village</span>
                            </div>
                        </div>
                    </div>

                    <!-- Local Name Input -->
                    <div class="input-group">
                        <label>Local/Colloquial Name <span>(Optional)</span></label>
                        <div class="glass-input-wrapper">
                            <input type="text" [(ngModel)]="place.localName" name="localName"
                                placeholder="What do locals call this?">
                        </div>
                    </div>

                    <!-- Optional Description -->
                    <div class="input-group">
                        <label>Description</label>
                        <div class="glass-input-wrapper">
                            <textarea [(ngModel)]="place.description" name="description"
                                placeholder="Any extra details..." rows="3"></textarea>
                        </div>
                    </div>

                    <!-- Premium Submit Button -->
                    <button type="submit" class="submit-btn-premium" [disabled]="!place.name || isSubmitting">
                        <div class="btn-ripple"></div>
                        <span *ngIf="!isSubmitting">
                            SUBMIT REPORT <i class="fas fa-arrow-right ms-2"></i>
                        </span>
                        <span *ngIf="isSubmitting">
                            <i class="fas fa-circle-notch fa-spin me-2"></i> PROCESSING
                        </span>
                    </button>
                </form>
            </div>

            <div class="footer-spacer"></div>
        </div>
    </div>

    <!-- Success Feedback Overlay -->
    <div class="success-overlay" *ngIf="showSuccess">
        <div class="success-card glass-glow animate-slide-up">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Submission Success!</h2>
            <p>Thanks! <strong>{{place.name}}</strong> has been submitted for verification. It will appear on the map
                soon.</p>
            <div class="redirect-hint">Redirecting...</div>
        </div>
    </div>
</div>